#!/bin/bash
set -e -u

export LICENSE_FULL_NAME="$(git config user.name || :)"

docker run $(compgen -A variable | grep -v "PATH" | awk "{print \"--env\", \$1}") --init --interactive --net host --rm --tty="$([ -t 0 ] && echo "true" || echo "false")" --volume /etc/group:/etc/group:ro --volume /etc/localtime:/etc/localtime:ro --volume /etc/passwd:/etc/passwd:ro --volume /etc/timezone:/etc/timezone:ro --volume /:/host --workdir /host"${PWD}" "${IMAGE:-timonier/license}":"${TAG:-latest}" "$(basename "$0")" "$@"
